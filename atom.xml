<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Dnnta's blog]]></title>
  <link href="http://dnnta.github.com/atom.xml" rel="self"/>
  <link href="http://dnnta.github.com/"/>
  <updated>2012-04-06T15:56:25+08:00</updated>
  <id>http://dnnta.github.com/</id>
  <author>
    <name><![CDATA[admin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[CALayers]]></title>
    <link href="http://dnnta.github.com/blog/2012/03/02/CALayers/"/>
    <updated>2012-03-02T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2012/03/02/CALayers</id>
    <content type="html"><![CDATA[<h2>Setting CALayer&nbsp;Corner Radius and Image Content</h2>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CALayer</span> <span class="o">*</span><span class="n">sublayer</span> <span class="o">=</span> <span class="p">[</span><span class="n">CALayer</span> <span class="n">layer</span><span class="p">];</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">blueColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">shadowRadius</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">shadowColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">shadowOpacity</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">192</span><span class="p">);</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">borderColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">borderWidth</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
</span><span class='line'><span class="n">sublayer</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addSublayer:</span><span class="n">sublayer</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">CALayer</span> <span class="o">*</span><span class="n">imageLayer</span> <span class="o">=</span> <span class="p">[</span><span class="n">CALayer</span> <span class="n">layer</span><span class="p">];</span>
</span><span class='line'><span class="n">imageLayer</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">sublayer</span><span class="p">.</span><span class="n">bounds</span><span class="p">;</span>
</span><span class='line'><span class="n">imageLayer</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
</span><span class='line'><span class="n">imageLayer</span><span class="p">.</span><span class="n">contents</span> <span class="o">=</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;BattleMapSplashScreen.jpg&quot;</span><span class="p">].</span><span class="n">CGImage</span><span class="p">;</span>
</span><span class='line'><span class="n">imageLayer</span><span class="p">.</span><span class="n">masksToBounds</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">sublayer</span> <span class="nl">addSublayer:</span><span class="n">imageLayer</span>
</span></code></pre></td></tr></table></div></figure>




<!--more-->


<p><img src="http://dnnta.github.com/images/CALayer-with-Image-Content-and-Corner-Radius.jpg" width="300" height="300" title="&#34;simpler layer&#34;" alt="&#34;simpler layer&#34;"> &nbsp;&nbsp;&nbsp;
<img src="http://dnnta.github.com/images/CALayer-Custom-Drawn-200x300.jpg" title="&#34;Custom Drawn Content&#34;" alt="&#34;Custom Drawn Content&#34;"></p>

<h2>Custom Drawn Content</h2>

<p>Add the following code at the bottom of your viewDidLoad to add a new layer that will be custom drawn:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// 大部分和之前一样设置shadow/cornerRadius/border/masksToBounds</span>
</span><span class='line'><span class="n">CALayer</span> <span class="o">*</span><span class="n">customDrawn</span> <span class="o">=</span> <span class="p">[</span><span class="n">CALayer</span> <span class="n">layer</span><span class="p">];</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">greenColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">40</span><span class="p">);</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">shadowRadius</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">shadowColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">shadowOpacity</span> <span class="o">=</span> <span class="mf">0.8</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">cornerRadius</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">borderColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">borderWidth</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
</span><span class='line'><span class="n">customDrawn</span><span class="p">.</span><span class="n">masksToBounds</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addSublayer:</span><span class="n">customDrawn</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">customDrawn</span> <span class="n">setNeedsDisplay</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p><em>需要注意以下两点：</em><br/>
1. 设置<code>delegate</code>并实现<code>drawLayer:inContext</code> <br/>
2. <code>addSublayer</code>后需要调用<code>setNeedsDisplay</code>实现重绘</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="kt">void</span> <span class="nf">MyDrawColoredPattern</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">info</span><span class="p">,</span> <span class="n">CGContextRef</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGColorRef</span> <span class="n">dotColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nl">colorWithHue:</span><span class="mi">0</span> <span class="nl">saturation:</span><span class="mi">0</span> <span class="nl">brightness:</span><span class="mf">0.07</span> <span class="nl">alpha:</span><span class="mf">1.0</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'>    <span class="n">CGColorRef</span> <span class="n">shadowColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nl">colorWithRed:</span><span class="mi">1</span> <span class="nl">green:</span><span class="mi">1</span> <span class="nl">blue:</span><span class="mi">1</span> <span class="nl">alpha:</span><span class="mf">0.1</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextSetFillColorWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">dotColor</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextSetShadowWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">shadowColor</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextAddArc</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">radians</span><span class="p">(</span><span class="mi">360</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextFillPath</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextAddArc</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">radians</span><span class="p">(</span><span class="mi">360</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextFillPath</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">drawLayer:</span><span class="p">(</span><span class="n">CALayer</span> <span class="o">*</span><span class="p">)</span><span class="n">layer</span> <span class="nl">inContext:</span><span class="p">(</span><span class="n">CGContextRef</span><span class="p">)</span><span class="n">context</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGColorRef</span> <span class="n">bgColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nl">colorWithHue:</span><span class="mf">0.6</span> <span class="nl">saturation:</span><span class="mf">1.0</span> <span class="nl">brightness:</span><span class="mf">1.0</span> <span class="nl">alpha:</span><span class="mf">1.0</span><span class="p">].</span><span class="n">CGColor</span><span class="p">;</span>
</span><span class='line'>    <span class="n">CGContextSetFillColorWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">bgColor</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextFillRect</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">layer</span><span class="p">.</span><span class="n">bounds</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">static</span> <span class="k">const</span> <span class="n">CGPatternCallbacks</span> <span class="n">callbacks</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyDrawColoredPattern</span><span class="p">,</span> <span class="nb">NULL</span> <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextSaveGState</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGColorSpaceRef</span> <span class="n">patternSpace</span> <span class="o">=</span> <span class="n">CGColorSpaceCreatePattern</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextSetFillColorSpace</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">patternSpace</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGColorSpaceRelease</span><span class="p">(</span><span class="n">patternSpace</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGPatternRef</span> <span class="n">pattern</span> <span class="o">=</span> <span class="n">CGPatternCreate</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span>
</span><span class='line'>                                           <span class="n">layer</span><span class="p">.</span><span class="n">bounds</span><span class="p">,</span>
</span><span class='line'>                                           <span class="n">CGAffineTransformIdentity</span><span class="p">,</span>
</span><span class='line'>                                           <span class="mi">24</span><span class="p">,</span>
</span><span class='line'>                                           <span class="mi">24</span><span class="p">,</span>
</span><span class='line'>                                           <span class="n">kCGPatternTilingConstantSpacing</span><span class="p">,</span>
</span><span class='line'>                                           <span class="n">true</span><span class="p">,</span>
</span><span class='line'>                                           <span class="o">&amp;</span><span class="n">callbacks</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGFloat</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
</span><span class='line'>    <span class="n">CGContextSetFillPattern</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">alpha</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGPatternRelease</span><span class="p">(</span><span class="n">pattern</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextFillRect</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">layer</span><span class="p">.</span><span class="n">bounds</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextRestoreGState</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS开发常识图解]]></title>
    <link href="http://dnnta.github.com/blog/2011/12/01/ios-develop-tips-1/"/>
    <updated>2011-12-01T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/12/01/ios-develop-tips-1</id>
    <content type="html"><![CDATA[<h2>开源协议图解</h2>

<p><img src="http://dnnta.github.com/images/free_software_licenses.png" title="free_software_licenses" ></p>

<!--more-->


<h2>frame和bounds</h2>

<p>frame和bounds是UIView中的两个属性(property)。
frame指的是：该view在父view坐标系统中的位置和大小。（参照点是父亲的坐标系统)<br/>
bounds指的是：该view在本身坐标系统中的位置和大小。（参照点是本身坐标系统)</p>

<p><img src="http://dnnta.github.com/images/frame_bounds.png" title="frame_bounds" ></p>

<h2>常用控件大小</h2>

<p><img src="http://dnnta.github.com/images/sizes.png" title="size of iPhone UI Elements" ></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UITableView]]></title>
    <link href="http://dnnta.github.com/blog/2011/11/23/UITableView/"/>
    <updated>2011-11-23T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/11/23/UITableView</id>
    <content type="html"><![CDATA[<p>UITableViewCell局部刷新</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObjects:</span><span class="n">indexPathOfYourCell</span><span class="p">,</span> <span class="nb">nil</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationNone</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>下拉刷新 关键字<code>pull refresh</code></p>

<p>字体占用空间<code>Helvetica</code></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'> <span class="n">CGSize</span> <span class="n">size</span> <span class="o">=</span> <span class="p">[</span><span class="n">text</span> <span class="nl">sizeWithFont:</span><span class="n">font</span> <span class="nl">constrainedToSize:</span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mf">175.0f</span><span class="p">,</span> <span class="mf">2000.0f</span><span class="p">)</span> <span class="nl">lineBreakMode:</span><span class="n">UILineBreakModeWordWrap</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UINavigationBar]]></title>
    <link href="http://dnnta.github.com/blog/2011/11/03/uinavigationbar-custom/"/>
    <updated>2011-11-03T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/11/03/uinavigationbar-custom</id>
    <content type="html"><![CDATA[<h3>custom UITabbarItem</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">UIFont</span> <span class="o">*</span><span class="n">font</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIFont</span> <span class="nl">fontWithName:</span><span class="s">@&quot;Helvetica&quot;</span> <span class="nl">size:</span><span class="mf">13.0f</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">UIButton</span> <span class="o">*</span><span class="n">backBtn</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">buttonWithType:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">backBtn</span> <span class="nl">setBackgroundImage:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;btn_left.png&quot;</span><span class="p">]</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">backBtn</span> <span class="nl">addTarget:</span><span class="n">self</span> <span class="nl">action:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">back:</span><span class="p">)</span> <span class="nl">forControlEvents:</span><span class="n">UIControlEventTouchUpInside</span><span class="p">];</span>
</span><span class='line'><span class="n">backBtn</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">38</span><span class="p">);</span>
</span><span class='line'><span class="p">[</span><span class="n">backBtn</span> <span class="nl">setTitle:</span><span class="s">@&quot;  返回&quot;</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="n">backBtn</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">backBtn</span> <span class="nl">setTitleShadowColor:</span><span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">]</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="n">backBtn</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">backItem</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithCustomView:</span><span class="n">backBtn</span><span class="p">];</span>
</span><span class='line'><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">leftBarButtonItem</span> <span class="o">=</span> <span class="n">backItem</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">backItem</span> <span class="n">release</span><span class="p">];</span>   
</span><span class='line'>
</span><span class='line'><span class="n">UIButton</span> <span class="o">*</span><span class="n">rightBtn</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIButton</span> <span class="nl">buttonWithType:</span><span class="n">UIButtonTypeCustom</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">rightBtn</span> <span class="nl">setBackgroundImage:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;btn_right.png&quot;</span><span class="p">]</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">rightBtn</span> <span class="nl">addTarget:</span><span class="n">self</span> <span class="nl">action:</span><span class="nb">nil</span> <span class="nl">forControlEvents:</span><span class="n">UIControlEventTouchUpInside</span><span class="p">];</span>
</span><span class='line'><span class="n">rightBtn</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">39</span><span class="p">);</span>
</span><span class='line'><span class="p">[</span><span class="n">rightBtn</span> <span class="nl">setTitle:</span><span class="s">@&quot;纠错&quot;</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">rightBtn</span> <span class="nl">setTitleShadowColor:</span><span class="p">[</span><span class="n">UIColor</span> <span class="n">blackColor</span><span class="p">]</span> <span class="nl">forState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class='line'><span class="n">rightBtn</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="n">rightBtn</span><span class="p">.</span><span class="n">titleLabel</span><span class="p">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span><span class="p">;</span>
</span><span class='line'><span class="n">UIBarButtonItem</span> <span class="o">*</span><span class="n">rightItem</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIBarButtonItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithCustomView:</span><span class="n">rightBtn</span><span class="p">];</span>
</span><span class='line'><span class="n">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="o">=</span> <span class="n">rightItem</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">rightItem</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">back:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="nl">popViewControllerAnimated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>设置UIBarButtonItem里面图片的偏移</h3>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//moves the image 4 pixels down.</span>
</span><span class='line'><span class="kt">float</span> <span class="n">topInset</span> <span class="o">=</span> <span class="mf">4.0f</span><span class="p">;</span>
</span><span class='line'><span class="n">myUIBarButton</span><span class="p">.</span><span class="n">imageInsets</span> <span class="o">=</span> <span class="n">UIEdgeInsetsMake</span><span class="p">(</span><span class="n">topInset</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="o">-</span><span class="n">topInset</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ruby on Windows]]></title>
    <link href="http://dnnta.github.com/blog/2011/09/01/ruby-on-windows/"/>
    <updated>2011-09-01T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/09/01/ruby-on-windows</id>
    <content type="html"><![CDATA[<div style="width:595px" id="__ss_9023966"> <strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/changmason/ruby-on-windows-for-rubyconftw-2011" title="Ruby on Windows (RubyConf.tw 2011)" target="_blank">Ruby on Windows (RubyConf.tw 2011)</a></strong> <iframe src="http://www.slideshare.net/slideshow/embed_code/9023966" width="595" height="497" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe> </div>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[开心编程，学会CRUD之后]]></title>
    <link href="http://dnnta.github.com/blog/2011/09/01/Next-step-after-learning-Rails-CRUD/"/>
    <updated>2011-09-01T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/09/01/Next-step-after-learning-Rails-CRUD</id>
    <content type="html"><![CDATA[<p><a href="http://wildjcrt.github.com/happy_programming/#1">开心编程</a></p>

<p>10個從入門到稍微進階一點的點子</p>

<ol>
<li>簡單的部落格，每篇文章底下要有留言功能</li>
<li>讓網友張貼程式碼的網站，要有產生短網址的功能</li>
<li>一個列出待辦清單的網站（Todo list）</li>
<li>幫第一個、第二個點子加上使用者註冊、登入驗證等功能</li>
<li>做一個網站，可以透過這個網站以及Twilio這個網路服務發個簡訊給你自己</li>
<li>做一個網站，可以讓使用者上傳檔案，檔案上傳之後會存到Amazon S3的雲端儲存空間</li>
<li>第三個點子，Todo list 加上Ajax。同時也加上使用者註冊、登入驗證，以及發信提醒使用者尚有待辦事項的功能</li>
<li>建立你自己的 JSON 及 XML API，看是要幫 Todo list 加上 API 還是其他網站</li>
<li>利用你自己建立的 API，再將你自己的 API 包成可以直接提供給其他開發者使用的函式庫（原文案例是使用 Ruby 語言，所以是包成一個 Ruby gem）</li>
<li>做到這個階段，你應該有辦法自己想出一個真正想做的點子了。如果還沒有，不如做個記帳軟體，要能呈現圖表 &amp; 將記帳的內容輸出成 CSV 檔案</li>
</ol>


<p>這每個點子背後都有其意義，包括讓你掌握最基本的程式運作原理、網頁運作方式，或是自行建立 API 來讓自己的團隊、外部團隊可以透過 API 來交流資料，甚至是你可以自己以這樣的方式開發出一個與 Mobile Apps 搭配的網路服務（如果你想做一個 Foursquare 及類似的簽到、打卡服務，或是像 Instagram 這樣的有趣拍照軟體，基本架構就是如此）。</p>

<p>當然，在你什麼都還不懂的情況下，每一個點子本身都是一個龐大的挑戰，但如果你遲遲沒有開始，我相信你三年後還是一行程式都不會寫。先試著把第一個案例完成，我建議你可以使用 Ruby on Rails + MySQL 作為開始，Ruby on Rails 是一個非常優秀的網頁開發框架。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[delegate到底是个什么东西]]></title>
    <link href="http://dnnta.github.com/blog/2011/08/23/what-is-ios-delegate/"/>
    <updated>2011-08-23T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/08/23/what-is-ios-delegate</id>
    <content type="html"><![CDATA[<p>以下段落全摘抄于网络，便于本人意会。</p>

<blockquote><p>任何事物，任何事情。千万别太过彻底的。。。。<br/>有时候模糊没啥不好，明白就行</p></blockquote>




<blockquote><p>delegate的概念出现与mvc，protocol，单线继承 密切相关。object-c 里没有多继承。那么又要避免做出一个对象什么都会（super class monster，huge ,super,waste）。一个超能对象，本身是否定了面向对象的概念和真谛了。</p></blockquote>




<blockquote><p>The main value of delegation is that it allows you to easily customize the behavior of several objects in one central object</p><p>Helper Objects (Delegate and DataSource)<br/>Helper Objects are used throughout Cocoa and CocoaTouch, and usually take the form of a delegate or dataSource. They are commonly used to add functionality to an existing class without having to subclass it.</p></blockquote>




<blockquote><p>Cocoa中处理事件的方式有几种，其中一种是你可以重载类中的对应的事件处理方 法，比如MouseDown事件在NSResponse类中就被方法mouseDown:处理，所以所有继承自NSResponse的类都可以重载 mouseDown:方法来实现对MouseDown事件的处理。</p><p>   另外一种处理方式就是使用Delegate，当一个对象接受到某个事件或者通知的时候， 会向它的Delegate对象查询它是否能够响应这个事件或者通知，如果可以这个对象就会给它的Delegate对象发送一个消息（执行一个方法调用）</p></blockquote>




<blockquote><p>代理，他一定分担其它object的一部分工作!</p><p>   理由，有些动作是多个动作的复合体，例如 滑动条的，滑动过程，要处理滑动的速度，太快不行，他反应不了，还有滑动条滑动的连贯性，你不能一跳一跳的走吧，那难看死了，那就涉及到动画处理，最后滑动条滑到头了，触发什么事件，就这么一个事最起码要3个方法去完善它，在这里代理就用上了，他把一个大任务分送到3个子方法去做，那么这3个子方法就充当代理的角色，也就是xxxdelegate，这样的好处使代码的重用程度更高，而且，还易与维护，一个子方法发生变动不影响 整个大功能，否则写到一起，你改动一处，牵一发而动全身，在软件工程里很忌讳的，因为它是新衍生的语言么，设计者肯定在，这样以往的语言架构上都有的通病（模块的耦合度高和重用不是很好）上作调整。</p><p>  其次，有过c++/c开发经验的人 马上会想到callback我感觉他们是有点像，但是callback多数都是系统掉回去用了，例如，在c++中ontimer这个时钟，它每多少秒干什么事，就需要一个action 函数实现它，那么这个函数就是系统来调用，不是给我们用户创建的object调用的，而delegate分发出去谁用了说不准，我感觉设计者在设计这个delegate的时候，强调的是分发，而不是强调的是谁来用。</p></blockquote>




<blockquote><p>打个比方，本来每个人的桌子都要自己清理，可能桌子意乱，自己就要清理一下。但是有一天来了一个阿姨(delegate)，大家把清理桌子的活都委托给他了。阿姨是个实现了清理技能的delegate。原因很多种，自己太懒、太忙、或者残了。。。</p><p>   注意的是，delegate一般会保留一个委托者的引用。因为阿姨不能按一个套路清理所有人的桌子，经常还得找委托者问，这个东西能不能扔。这个很重要!</p></blockquote>




<blockquote><p>举个例子,我和gagaga都买股票,都想找个证卷商帮忙.<br/>我可以找我自己的,他也可以找他的,写程序的人发现我们的需求差不多,就给我们介绍了同一个奸商,lv同学.<br/>我们两给他的任务都很简单,就是当股票低于10元的时候就全部抛掉,那么lv就是我们的delegate,他就会帮我们<br/>盯着价格,我们就不用操心了.</p></blockquote>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOS随机数]]></title>
    <link href="http://dnnta.github.com/blog/2011/08/12/iOS-random/"/>
    <updated>2011-08-12T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/08/12/iOS-random</id>
    <content type="html"><![CDATA[<p>在iPhone中有几个内嵌的随机数发生器，很多人的第一反应可能就是在调用如下函数后使用<code>rand*()</code>：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">srandom</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>但是<code>rand()</code>实际并不是一个真正的伪随机数发生器，<code>random()</code>会相对好点，但也不算理想。幸运的是iPhone上还有其他的选择。个人来说我首选<code>arc4random()</code>，原因就是它是一个真正的伪随机算法，而且范围是<code>rand()</code>的两倍。</p>

<p>在iPhone中，RAND_MAX是0x7fffffff (2147483647)，而arc4random()返回的最大值则是 0x100000000 (4294967296)，从而有更好的精度。此外，使用arc4random()还不需要生成随机种子，因为第一次调用的时候就会自动生成。</p>

<p>通过<code>arc4random()</code>获取0到x-1之间的整数的代码如下：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">srandom</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>获取1到x之间的整数的代码如下:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">srandom</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>其中，根据预算优先级括号实际是不需要的，不过我还是对括号格外小心。</p>

<p>最后如果想生成一个浮点数，可以在项目中定义如下宏</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">srandom</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后就可以使用<code>arc4random()</code>来获取0到100之间浮点数了（精度是<code>rand()</code>的两倍），代码如下：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">srandom</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[解决在UIWebView中加载图片时出现延迟现象的做法]]></title>
    <link href="http://dnnta.github.com/blog/2011/08/10/the-problem-of-image-lazy-load-in-uiwebview/"/>
    <updated>2011-08-10T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/08/10/the-problem-of-image-lazy-load-in-uiwebview</id>
    <content type="html"><![CDATA[<p>转一篇文章，估计以后用得着</p>

<p>最近在用UIWebView控件来显示从某个网站上的图片跟文字，做得还算是顺利，不过有个小问题就是，页面已经通信完毕，并且文字已经显示出来 了，但是要表示的图片却要过个3秒左右才出来，实在是恼火。本来以为是图片的url没解析出来，用NSLog来打印出来的时候没发现有什么错的，真是奇 怪。
先来上段代码先（代码中的图片地址是假的，请各位试的时候自己替换一下</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">NSString</span><span class="o">*</span> <span class="n">showHtml</span> <span class="o">=</span> <span class="s">@&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&#39;www.abc.com/img/img1.jpg&#39;/&gt;&lt;p&gt;here is show a picture.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">UIWebView</span><span class="o">*</span> <span class="n">webView</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIWebView</span> <span class="n">alloc</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">webView</span> <span class="nl">loadHTMLString:</span><span class="n">showHtml</span> <span class="nl">baseURL:</span><span class="p">[</span><span class="n">NSURL</span> <span class="nl">fileURLWithPath:</span><span class="p">[[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="n">bundlePath</span><span class="p">]]]</span><span class="err">；</span>
</span><span class='line'><span class="c1">//以下把该UIWebView显示出来的代码略</span>
</span></code></pre></td></tr></table></div></figure>


<p>这时候你会发现，在view中文出来一段时间后图片才会显示，效果就跟弹出来一样，当然这不是我想要的效果，我想让图片跟文字同时都显示出来。
那么有没有办法来解决这个问题呢，你可能会说先把图片给下载到本地再从本地加载，这是手机开发好吧，不要弄那么费资源的事情。其实我在这个地方也被卡住了 一段时间，不过就在刚刚不久前通过google无意中发现了一个办法（查询的关键字已经忘记了，原谅我吧），很好的解决了这个问题，那就是把该图片通过 base64的方法变成文字再在web上显示出来，废话不多说各位直接看代码吧</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">NSString</span><span class="o">*</span> <span class="n">showHtml</span> <span class="o">=</span> <span class="s">@&quot;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&#39;data:image/jpg;base64,%@&#39;/&gt;&lt;p&gt;here is show a picture.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">NSData</span><span class="o">*</span> <span class="n">imageData</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSData</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithContentsOfURL:</span><span class="p">[</span><span class="n">NSURL</span> <span class="nl">URLWithString:</span><span class="s">@&quot;www.abc.com/img/img1.jpg&quot;</span><span class="p">]];</span> <span class="n">NSString</span><span class="o">*</span> <span class="n">imageString</span> <span class="o">=</span> <span class="p">[</span><span class="n">imageData</span> <span class="n">base64Encoding</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">UIWebView</span><span class="o">*</span> <span class="n">webView</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIWebView</span> <span class="n">alloc</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">webView</span> <span class="nl">loadHTMLString:</span><span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="n">showHtml</span><span class="p">,</span> <span class="n">imageString</span><span class="p">]</span> <span class="nl">baseURL:</span><span class="p">[</span><span class="n">NSURL</span> <span class="nl">fileURLWithPath:</span><span class="p">[[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="n">bundlePath</span><span class="p">]]]</span><span class="err">；</span>
</span><span class='line'><span class="c1">//以下把该UIWebView显示出来的代码略</span>
</span></code></pre></td></tr></table></div></figure>


<p>粗体的地方就是通过base64来实现的地方，我们这里显示的是jpg格式的图片，因此在img标签的src属性里面写的是<code>src=’data:image/jpg;base64,%@</code>，而如果是其他格式的图片的话记得把对应的地方给改一下。（不过我实验的结果是，即使你用image/png来表示jpg的图片的话一样能表示的说，至于有不良情况的话我也就不知道了）
通过这样处理，解决了在UIWebView中能同时显示图片跟文字，而不会出现图片加载延时的情况了，活活。（别看写出来就那么一段代码，这可是花费了我很长的时间才给解决掉的问题的，ft）</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ipa png图片提取]]></title>
    <link href="http://dnnta.github.com/blog/2011/07/08/pngs-of-ipa/"/>
    <updated>2011-07-08T00:00:00+08:00</updated>
    <id>http://dnnta.github.com/blog/2011/07/08/pngs-of-ipa</id>
    <content type="html"><![CDATA[<p>Apple 对 iPhone 应用程序中的 png 图片进行了特殊的处理，在 png 文件头之后加了一个非标准的 CgBI 数据段，IDAT 段图像数据也没有传统的压缩数据头和尾，并且红色和蓝色是反的，这样就无法在 Mac 或 Windows 下不能正常使用了。</p>

<p>网上找滴解决办法：</p>

<ol>
<li>先把ipa软件后缀改成zip，然后用winrar解压，然后下载iphone &ndash; fixpng.exe这个软件。把需要转换的png拷贝到主程序目录下的png目录，运行程序，点击convert，转换完成后即可在fixed文件夹找到转换后的png。</li>
<li><a href="http://summic.com/post/53/">还原iphone app中滴png文件</a></li>
</ol>

]]></content>
  </entry>
  
</feed>
